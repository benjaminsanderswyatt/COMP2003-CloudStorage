@page
@model Ethereal_Cloud.Pages.AuthModel
@{

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/css/Site.css" asp-append-version="true">
    <link rel="stylesheet" href="/css/Auth.css" asp-append-version="true">
    <link rel="stylesheet" href="/css/Normalise.css" asp-append-version="true">
    <link rel="icon" type="image/x-icon" href="~/images/Logo.png" />
    <title>Authentication</title>
    Layout = null;

    <div class="auth-form">
        <h1>2FA</h1>
        <h2>Enter the code</h2>
        <form style="text-align:center;" method="post">
            <div class="auth-code-inputs">
                <input type="text" id="digit1" name="digit1" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
                <input type="text" id="digit2" name="digit2" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
                <input type="text" id="digit3" name="digit3" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
                <input type="text" id="digit4" name="digit4" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
                <input type="text" id="digit5" name="digit5" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
                <input type="text" id="digit6" name="digit6" class="auth-code-input" maxlength="1" oninput="moveToNextInput(this, event)" required>
            </div>
            <button type="submit" class="btn btn-primary auth-submit-btn">Authenticate</button>
            <div class="auth-message">Enter the code generated from your app or email.</div>
        </form>
    </div>

    @if (ViewData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger mt-3 text-center" role="alert">
            @ViewData["ErrorMessage"]
        </div>
    }

    <!-- Scripts for automatic moving to next cell -->
    <script>
        function moveToNextInput(input, event) {
            if (event.inputType === 'insertText') {
                const maxLength = parseInt(input.getAttribute('maxlength'));
                const currentLength = input.value.length;

                if (currentLength >= maxLength) {
                    const nextInput = input.nextElementSibling;
                    if (nextInput) {
                        nextInput.focus();
                    }
                }
            }
        }
    </script>
}